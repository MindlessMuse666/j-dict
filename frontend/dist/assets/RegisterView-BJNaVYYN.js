import{C as y,u as h,f as c,g as k,p as V,c as l,d as t,j as C,e as f,m as i,v as u,t as L,l as p,k as P,i as M,D as B,E as R,b as a}from"./main-CNz9C7Yr.js";const S={class:"max-w-md mx-auto pt-8"},_={class:"bg-surface rounded-xl shadow-sm border border-stone-100 p-8"},q={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"p-4 bg-red-50 border border-red-100 rounded-lg"},N={class:"flex items-center"},U={class:"text-red-800"},j=["disabled"],D={key:0,class:"flex items-center justify-center"},E={key:1},T={class:"text-center pt-4 border-t border-stone-100"},A={class:"text-text-muted"},G={__name:"RegisterView",setup(H){const x=R(),b=y(),{showSuccess:w}=h(),n=c(!1),r=c(""),s=k({name:"",email:"",password:"",confirmPassword:""}),m=V(()=>s.password!==s.confirmPassword&&s.confirmPassword.length>0),v=async()=>{if(!m.value){n.value=!0,r.value="";try{const d=await b.register(s.email,s.password,s.name);d.success?(w("Регистрация прошла успешно"),x.push({name:"Home"})):r.value=d.error}catch{r.value="Произошла ошибка при регистрации"}finally{n.value=!1}}};return(d,e)=>{const g=B("RouterLink");return a(),l("div",S,[t("div",_,[e[13]||(e[13]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-2xl font-bold text-text-main mb-2 font-jp"},"Регистрация"),t("p",{class:"text-text-muted"},"Создайте новый аккаунт")],-1)),t("form",{onSubmit:C(v,["prevent"]),class:"space-y-6"},[t("div",null,[e[4]||(e[4]=t("label",{for:"name",class:"block text-sm font-medium text-text-main mb-2"}," Имя ",-1)),i(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",required:"",class:"w-full px-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-stone-400",placeholder:"Иван Иванов"},null,512),[[u,s.name]])]),t("div",null,[e[5]||(e[5]=t("label",{for:"email",class:"block text-sm font-medium text-text-main mb-2"}," Email ",-1)),i(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>s.email=o),type:"email",required:"",class:"w-full px-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-stone-400",placeholder:"Введите ваш email"},null,512),[[u,s.email]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"password",class:"block text-sm font-medium text-text-main mb-2"}," Пароль ",-1)),i(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>s.password=o),type:"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-stone-400",placeholder:"Введите ваш пароль"},null,512),[[u,s.password]]),e[7]||(e[7]=t("p",{class:"mt-1 text-sm text-text-muted"},"Минимум 6 символов",-1))]),t("div",null,[e[8]||(e[8]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-text-main mb-2"}," Подтверждение пароля ",-1)),i(t("input",{id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=o=>s.confirmPassword=o),type:"password",required:"",class:"w-full px-4 py-3 border border-stone-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-stone-400",placeholder:""},null,512),[[u,s.confirmPassword]]),m.value?(a(),l("p",q," Пароли не совпадают ")):f("",!0)]),r.value?(a(),l("div",z,[t("div",N,[e[9]||(e[9]=t("svg",{class:"w-5 h-5 text-red-500 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),t("span",U,L(r.value),1)])])):f("",!0),t("button",{type:"submit",disabled:n.value||m.value,class:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-white font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform active:scale-95"},[n.value?(a(),l("span",D,[...e[10]||(e[10]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" Регистрация... ",-1)])])):(a(),l("span",E,"Зарегистрироваться"))],8,j),t("div",T,[t("p",A,[e[12]||(e[12]=p(" Уже есть аккаунт? ",-1)),P(g,{to:{name:"Login"},class:"text-primary hover:text-primary/80 font-medium transition-colors"},{default:M(()=>[...e[11]||(e[11]=[p(" Войти ",-1)])]),_:1})])])],32)])])}}};export{G as default};
